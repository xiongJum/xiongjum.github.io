<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>正则表达式 · Lain</title><meta name="description" content="正则表达式 - null"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/gandalfr.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/solarized-light.min.css"><link rel="search" type="application/opensearchdescription+xml" href="https://blog.lain.buzz/atom.xml" title="Lain"><meta name="generator" content="Hexo 7.0.0-rc1"><link rel="alternate" href="/atom.xml" title="Lain" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/logo.ico" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/archives" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/favorites" target="_self" class="nav-list-link">LINK</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item"><a href="https://web.lain.buzz" target="_blank" class="nav-list-link">FAVORITES</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">正则表达式</h1><div class="tags"><a href="/tags/code/" class="tag-title">#code</a><a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="tag-title">#正则表达式</a></div><div class="post-info">2020年7月6日</div><div class="post-content"><h5 id="初识正则表达式"><a href="#初识正则表达式" class="headerlink" title="初识正则表达式"></a>初识正则表达式</h5><ul>
<li>使用python的内置函数</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 设置一个常量</span><br>name = <span class="hljs-string">&#x27;XiongJum|酒明|JumXiong|初学者&#x27;</span><br><br><span class="hljs-comment"># 判断是否有字符串XiongJum</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;是否含有XiongJum这个字符串：&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(name.index(<span class="hljs-string">&#x27;XiongJum&#x27;</span>) &lt; <span class="hljs-number">1</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;是否含有XiongJum这个字符串：&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&#x27;XiongJum&#x27;</span> <span class="hljs-keyword">in</span> name))<br></code></pre></td></tr></table></figure>

<pre><code>是否含有XiongJum这个字符串：True
是否含有XiongJum这个字符串：True
</code></pre>
<span id="more"></span>

<ul>
<li>初识正则表达式re<ul>
<li>Python内置函数能简单解决的事情，就没有必要使用正则表达式，如下例</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> re<br><br>findall = re.findall(<span class="hljs-string">&#x27;Jum&#x27;</span>, name)<br><span class="hljs-built_in">print</span>(findall)<br><br><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(findall) &gt; <span class="hljs-number">0</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;name含有Jum这个字符串&#x27;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;name不含有Jum这个字符串&#x27;</span>)<br></code></pre></td></tr></table></figure>

<pre><code>[&#39;Jum&#39;, &#39;Jum&#39;]
name含有Jum这个字符串
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 选择 name 里面的所有小写英文字母</span><br><br>re_findall = re.findall(<span class="hljs-string">&#x27;[a-z]&#x27;</span>, name)<br><span class="hljs-built_in">print</span>(re_findall)<br></code></pre></td></tr></table></figure>

<pre><code>[&#39;i&#39;, &#39;o&#39;, &#39;n&#39;, &#39;g&#39;, &#39;u&#39;, &#39;m&#39;, &#39;u&#39;, &#39;m&#39;, &#39;i&#39;, &#39;o&#39;, &#39;n&#39;, &#39;g&#39;]
</code></pre>
<h5 id="字符集"><a href="#字符集" class="headerlink" title="字符集"></a>字符集</h5><ul>
<li>字符集是由一对方括号”[]”括起来的字符集合，使用字符集合可以匹配多个字符中的一个<ul>
<li>如 C[ET]O,匹配到为CEO或CTO</li>
<li>[0-9a-fA-F]，匹配单个的十六进制数字</li>
</ul>
</li>
<li>字符和范围定义的先后循序对匹配的结果是没有任何影响的</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python">a = <span class="hljs-string">&#x27;uav,ubv,ucv,ucv,uov,uzb&#x27;</span><br><br><span class="hljs-comment"># 取&#x27;u&#x27; 和&#x27;v&#x27;中间为‘a’或‘b’的字符</span><br>findbat = re.findall(<span class="hljs-string">&#x27;u[ab]v&#x27;</span>, a)<br><span class="hljs-built_in">print</span>(findbat)<br><br><span class="hljs-comment"># 如果是连续的字符，可以使用-代替</span><br><span class="hljs-comment"># 取&#x27;u&#x27; 和&#x27;v&#x27;中间为‘a’至‘b’的字符</span><br>findall = re.findall(<span class="hljs-string">&#x27;u[a-c]v&#x27;</span>, a)<br><span class="hljs-built_in">print</span>(findall)<br><br><span class="hljs-comment"># [^string]为取反字符集</span><br><span class="hljs-comment"># 取&#x27;u&#x27; 和&#x27;v&#x27;中间不为‘a’或‘b’的字符</span><br>findall = re.findall(<span class="hljs-string">&#x27;u[^ab]&#x27;</span>, a)<br><span class="hljs-built_in">print</span>(findall)<br></code></pre></td></tr></table></figure>

<pre><code>[&#39;uav&#39;, &#39;ubv&#39;]
[&#39;uav&#39;, &#39;ubv&#39;, &#39;ucv&#39;, &#39;ucv&#39;]
[&#39;uc&#39;, &#39;uc&#39;, &#39;uo&#39;, &#39;uz&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python">num = <span class="hljs-string">&#x27;171-2119-2606-A4-A5&amp;A6&#x27;</span><br><br><span class="hljs-comment"># 概括字符集</span><br><br><span class="hljs-comment"># \d, 相当于[0-9]</span><br><span class="hljs-comment"># \D, 相当于[^0-9]</span><br><span class="hljs-comment"># \w, 相当于[A-Za-z0-9], 相当于匹配所有单词字符</span><br><br>notnum = re.findall(<span class="hljs-string">&#x27;\D&#x27;</span>, num)<br>stringall = re.findall(<span class="hljs-string">&#x27;\w&#x27;</span>, num)<br>num = re.findall(<span class="hljs-string">&#x27;\d&#x27;</span>, num)<br><br><span class="hljs-built_in">print</span>(notnum, <span class="hljs-string">&#x27;\n&#x27;</span>, num, <span class="hljs-string">&#x27;\n&#x27;</span>, stringall)<br></code></pre></td></tr></table></figure>

<pre><code>[&#39;-&#39;, &#39;-&#39;, &#39;-&#39;, &#39;A&#39;, &#39;-&#39;, &#39;A&#39;, &#39;&amp;&#39;, &#39;A&#39;] 
 [&#39;1&#39;, &#39;7&#39;, &#39;1&#39;, &#39;2&#39;, &#39;1&#39;, &#39;1&#39;, &#39;9&#39;, &#39;2&#39;, &#39;6&#39;, &#39;0&#39;, &#39;6&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;] 
 [&#39;1&#39;, &#39;7&#39;, &#39;1&#39;, &#39;2&#39;, &#39;1&#39;, &#39;1&#39;, &#39;9&#39;, &#39;2&#39;, &#39;6&#39;, &#39;0&#39;, &#39;6&#39;, &#39;A&#39;, &#39;4&#39;, &#39;A&#39;, &#39;5&#39;, &#39;A&#39;, &#39;6&#39;]
</code></pre>
<h5 id="数量词"><a href="#数量词" class="headerlink" title="数量词"></a>数量词</h5><ul>
<li>词法：{min, max}, min和max 都是非负整数</li>
<li>\b[1-9][0-8]{2,3}\b, 表示为 100-9888之间的数字, \b 表示的是边界</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python">stringnum = <span class="hljs-string">&#x27;python@java@C#123@C++XiongJumm&#x27;</span><br><span class="hljs-comment"># 匹配4-7位的连续字母</span><br>findall =re.findall(<span class="hljs-string">&#x27;[a-zA-Z]&#123;4,7&#125;&#x27;</span>, stringnum)<br><span class="hljs-built_in">print</span>(findall)<br><br><span class="hljs-comment"># 匹配 0-7位的连续字母</span><br>findall = findall =re.findall(<span class="hljs-string">&#x27;[a-zA-Z]&#123;,7&#125;&#x27;</span>, stringnum)<br><span class="hljs-built_in">print</span>(findall)<br><br><span class="hljs-comment"># 匹配 2-正无穷的连续字母</span><br>findall = findall =re.findall(<span class="hljs-string">&#x27;[a-zA-Z]&#123;2,&#125;&#x27;</span>, stringnum)<br><span class="hljs-built_in">print</span>(findall)<br><br><span class="hljs-comment"># 匹配连续两位的连续字母</span><br>findall = findall =re.findall(<span class="hljs-string">&#x27;[a-zA-Z]&#123;2&#125;&#x27;</span>, stringnum)<br><span class="hljs-built_in">print</span>(findall)<br></code></pre></td></tr></table></figure>

<pre><code>[&#39;python&#39;, &#39;java&#39;, &#39;XiongJu&#39;]
[&#39;python&#39;, &#39;&#39;, &#39;java&#39;, &#39;&#39;, &#39;C&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;C&#39;, &#39;&#39;, &#39;&#39;, &#39;XiongJu&#39;, &#39;mm&#39;, &#39;&#39;]
[&#39;python&#39;, &#39;java&#39;, &#39;XiongJumm&#39;]
[&#39;py&#39;, &#39;th&#39;, &#39;on&#39;, &#39;ja&#39;, &#39;va&#39;, &#39;Xi&#39;, &#39;on&#39;, &#39;gJ&#39;, &#39;um&#39;]
</code></pre>
<ul>
<li>贪婪模式<ul>
<li>一次性的读入整个字符串，如果不匹配就丢弃最右边的一个字符，如此循环，直到字符串的长度为0，如上例</li>
</ul>
</li>
<li>懒惰模式<ul>
<li>从字符串的最有左边开始，从0开始读取，若失败则多读一个字符，如此循环，直到读取完成，如下例</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 须在后方加入一个“？”，相当于&#123;4&#125;</span><br>findall = re.findall(<span class="hljs-string">&#x27;[a-zA-Z]&#123;4,7&#125;?&#x27;</span>, stringnum)<br><span class="hljs-built_in">print</span>(findall)<br></code></pre></td></tr></table></figure>

<pre><code>[&#39;pyth&#39;, &#39;java&#39;, &#39;Xion&#39;, &#39;gJum&#39;]
</code></pre>
<h5 id="边界匹配符和组"><a href="#边界匹配符和组" class="headerlink" title="边界匹配符和组"></a>边界匹配符和组</h5><ul>
<li>一般边界匹配符有一下几种</li>
</ul>
<table>
<thead>
<tr>
<th align="left">语法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">^</td>
<td align="left">匹配字符串开头（在有多行的情况中匹配每行的开头）</td>
</tr>
<tr>
<td align="left">$</td>
<td align="left">匹配字符串末尾（在有多行的情况下匹配每行的开头）</td>
</tr>
<tr>
<td align="left">\A</td>
<td align="left">仅匹配字符串的开头</td>
</tr>
<tr>
<td align="left">\Z</td>
<td align="left">仅匹配字符串的末尾</td>
</tr>
<tr>
<td align="left">\b</td>
<td align="left">匹配\w和\W之间</td>
</tr>
<tr>
<td align="left">\B</td>
<td align="left">\b</td>
</tr>
</tbody></table>
<ul>
<li>分组<ul>
<li>被括号括起来的的表达式就是分组。</li>
<li>分组表达式（…）其实就是把这部分字符作为一个整体</li>
<li>可以有多分组的情况，每遇到一个分组，编号就会+1，而且分组后面也是可以加数量词的</li>
</ul>
</li>
</ul>
<h5 id="替换字符串"><a href="#替换字符串" class="headerlink" title="替换字符串"></a>替换字符串</h5><ul>
<li>re.sub<ul>
<li>一些项目中我们需要替换字符串中的字符，这是后就可以使用函数 def sub()</li>
<li>具体参数如下</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">pattern</td>
<td align="left">必选，表示正则中的模式字符串</td>
</tr>
<tr>
<td align="left">repl</td>
<td align="left">必选，被替换的字符串</td>
</tr>
<tr>
<td align="left">string</td>
<td align="left">必选，表示要被处理，要被替换的那个string</td>
</tr>
<tr>
<td align="left">count</td>
<td align="left">可选，对于pattern中部分匹配到的结果，count可以对前几个group进行替换</td>
</tr>
<tr>
<td align="left">flags</td>
<td align="left">可选，正则表达式修饰符</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python">a = <span class="hljs-string">&#x27;Python$Android*Java-121&#x27;</span><br><br><span class="hljs-comment"># 将&quot;*&quot;或&quot;$&quot;替换为&quot;&amp;&quot;</span><br>sub1 = re.sub(<span class="hljs-string">&#x27;[\*$]&#x27;</span>,<span class="hljs-string">&#x27;&amp;&#x27;</span>,a)<br><span class="hljs-built_in">print</span>(sub1)<br><br><span class="hljs-comment"># 将字符串中第一个&quot;&amp;&quot;替换成 &quot;*&quot;</span><br>sub2 = re.sub(<span class="hljs-string">&#x27;\&amp;&#x27;</span>, <span class="hljs-string">&#x27;*&#x27;</span>, sub1, <span class="hljs-number">1</span>)<br><span class="hljs-built_in">print</span>(sub2)<br><br><span class="hljs-comment"># 将字符串中 &quot;*&quot; 替换为&quot;!&quot;, &quot;&quot;&amp; 替换为&quot;-&quot;</span><br><br><span class="hljs-comment"># 定义一个函数</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">convert</span>(<span class="hljs-params">value</span>):<br>    group = value.group()<br>    <span class="hljs-keyword">if</span> (group == <span class="hljs-string">&#x27;*&#x27;</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;!&#x27;</span><br>    <span class="hljs-keyword">elif</span> (group == <span class="hljs-string">&#x27;&amp;&#x27;</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;-&#x27;</span><br><br>    <br>    <br>sub3 = re.sub(<span class="hljs-string">&#x27;[\*&amp;]&#x27;</span>, convert, sub2)<br><span class="hljs-built_in">print</span>(sub3)<br></code></pre></td></tr></table></figure>

<pre><code>Python&amp;Android&amp;Java-121
Python*Android&amp;Java-121
Python!Android-Java-121
</code></pre>
<h5 id="re-match-和-re-search"><a href="#re-match-和-re-search" class="headerlink" title="re.match 和 re.search"></a>re.match 和 re.search</h5><ul>
<li>re.match函数<ul>
<li>语法：re.match(pattern, string, flag&#x3D;0)</li>
<li>re.match 尝试从字符串的起始位置匹配一个模式，如果不是其实位置匹配成功的话， match() 就返回None</li>
</ul>
</li>
<li>re.search()函数<ul>
<li>re.search(pattern, string, flag&#x3D;0)</li>
<li>扫描整个字符串并返回第一个成功的匹配</li>
</ul>
</li>
<li>re.match() 和 re.search() 的具体描述如下</li>
</ul>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">pattern</td>
<td align="left">匹配的正则表达式</td>
</tr>
<tr>
<td align="left">string</td>
<td align="left">要匹配的字符串</td>
</tr>
<tr>
<td align="left">flags</td>
<td align="left">标志位，用于控制正则表达是的匹配方式，如:是否区别大小写</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">函数</th>
<th align="left">区别</th>
</tr>
</thead>
<tbody><tr>
<td align="left">re.match()</td>
<td align="left">只匹配字符串的开始。如果字符串开始不符合正则表达式，则匹配失败，函数返回None</td>
</tr>
<tr>
<td align="left">re.search()</td>
<td align="left">匹配整个字符串，直到找到一个匹配</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python">img = <span class="hljs-string">&#x27;&lt;img src=&quot;http://static.xiaobu.hk/cityact/application/images/20200612/2QCXwH6pej.JPG&quot;&gt;&#x27;</span><br><br><span class="hljs-comment"># 使用re.search()</span><br>search = re.search(<span class="hljs-string">&#x27;&lt;img src=&quot;(.*)&quot;&gt;&#x27;</span>, img)<br><span class="hljs-comment"># group(0)是一个完整的分组</span><br><span class="hljs-built_in">print</span>(search.group(<span class="hljs-number">0</span>))<br><span class="hljs-built_in">print</span>(search.group(<span class="hljs-number">1</span>))<br><br><span class="hljs-comment"># 使用re.findall()</span><br>search = re.findall(<span class="hljs-string">&#x27;&lt;img src=&quot;(.*)&quot;&gt;&#x27;</span>, img)<br><span class="hljs-comment"># group(0)是一个完整的分组</span><br><span class="hljs-built_in">print</span>(search)<br><br><span class="hljs-comment"># 多个分组的使用</span><br>search = re.search(<span class="hljs-string">&#x27;&lt;(.*) src=&quot;(.*)&quot;&gt;&#x27;</span>, img)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;打印字符串 img:&quot;</span>, search.group(<span class="hljs-number">1</span>))<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;打印图片地址&quot;</span>, search.group(<span class="hljs-number">2</span>))<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;以元组的形式打印 img和图片地址:&quot;</span>, search.group(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>))<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;使用 groups:&quot;</span>,search.groups())<br></code></pre></td></tr></table></figure>

<pre><code>&lt;img src=&quot;http://static.xiaobu.hk/cityact/application/images/20200612/2QCXwH6pej.JPG&quot;&gt;
http://static.xiaobu.hk/cityact/application/images/20200612/2QCXwH6pej.JPG
[&#39;http://static.xiaobu.hk/cityact/application/images/20200612/2QCXwH6pej.JPG&#39;]
打印字符串 img: img
打印图片地址 http://static.xiaobu.hk/cityact/application/images/20200612/2QCXwH6pej.JPG
以元组的形式打印 img和图片地址: (&#39;img&#39;, &#39;http://static.xiaobu.hk/cityact/application/images/20200612/2QCXwH6pej.JPG&#39;)
使用 groups: (&#39;img&#39;, &#39;http://static.xiaobu.hk/cityact/application/images/20200612/2QCXwH6pej.JPG&#39;)
</code></pre>
</div></article></div></main><footer><div class="paginator"><a href="/tech/code_Python%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%A4%9A%E6%80%81/" class="prev">PREV</a><a href="/tech/tools_V2ray/" class="next">NEXT</a></div><div class="copyright"><p>© 2017 - 2023 <a href="https://blog.lain.buzz"></a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/MikeCoder/hexo-theme-gandalfr" target="_blank">hexo-theme-gandalfr</a>.</p></div></footer></div><script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js" crossorigin="anonymous"></script><script src="//cdn.bootcss.com/jquery/3.1.1/jquery.js" crossorigin="anonymous"></script><script>$(document).ready(function() { hljs.configure({useBR: true}); $('pre').each(function(i, block) { hljs.highlightBlock(block); }); });</script></body></html>