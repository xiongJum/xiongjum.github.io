<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>V2ray搭建教程 · Lain</title><meta name="description" content="V2ray搭建教程 - null"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/gandalfr.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/solarized-light.min.css"><link rel="search" type="application/opensearchdescription+xml" href="https://blog.lain.buzz/atom.xml" title="Lain"><meta name="generator" content="Hexo 7.0.0-rc1"><link rel="alternate" href="/atom.xml" title="Lain" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/logo.ico" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/archives" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/favorites" target="_self" class="nav-list-link">LINK</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item"><a href="https://web.lain.buzz" target="_blank" class="nav-list-link">FAVORITES</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">V2ray搭建教程</h1><div class="tags"><a href="/tags/%E4%BB%A3%E7%90%86/" class="tag-title">#代理</a><a href="/tags/V2ray/" class="tag-title">#V2ray</a><a href="/tags/%E6%A2%AF%E5%AD%90/" class="tag-title">#梯子</a></div><div class="post-info">2020年7月5日</div><div class="post-content"><p>V2Ray 是一个与 Shadowsocks 类似的代理软件，可以用来科学上网等。</p>
<span id="more"></span>

<h1 id="1-服务器"><a href="#1-服务器" class="headerlink" title="1. 服务器"></a>1. 服务器</h1><p>1, 可以使用<a target="_blank" rel="noopener" href="https://www.linode.com/">linode</a> 或者<a target="_blank" rel="noopener" href="https://bandwagonhost.cn/">搬瓦工</a>vps服务器</p>
<p>2, 本次推荐Google Cloud(谷歌云)，搭建v2ray或者其余学习用途</p>
<p>3, <img src="https://cdn.jsdelivr.net/gh/xiongJum/Picture/img/scr_GoogleCloud.png"></p>
<pre><code>(1). 优点

+   也无需担心和AWS一样会莫名其妙的扣费，在没有升级为付费用户之前是不会扣除信用卡的金额
+   新用户会赠送等同于$300 的当地货币使用，有效期为12个月
+   有香港等亚太地区的服务器，使用延迟会好上不少

(2). 缺点

+   搭建过程中需要使用魔法上网
</code></pre>
<p>4, 本教程暂不介绍服务器申请<br>5, 也可以使用別的國外服務器</p>
<h1 id="2-服务端配置"><a href="#2-服务端配置" class="headerlink" title="2. 服务端配置"></a>2. 服务端配置</h1><p>1, 本次教程选择的面板为<a target="_blank" rel="noopener" href="https://github.com/sprov065">sprov065</a>@github用户的<a target="_blank" rel="noopener" href="https://github.com/sprov065/v2-ui">v2-ui</a> </p>
<pre><code>(1). 可视化操作，查看方便、学习门槛较低
(2). 由于是网页端所以管理会比较方便
(3). 该面板可以配置多用户
</code></pre>
<h2 id="2-1-安装-amp-升级"><a href="#2-1-安装-amp-升级" class="headerlink" title="2.1 安装&amp;升级"></a>2.1 安装&amp;升级</h2><p>1, 安裝v2ray</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">bash &lt;(curl -Ls https://blog.sprov.xyz/v2-ui.sh)<br></code></pre></td></tr></table></figure>

<h2 id="2-2-設置"><a href="#2-2-設置" class="headerlink" title="2.2 設置"></a>2.2 設置</h2><p>1, 输入v2-ui，进入面板设置</p>
<img src="https://cdn.jsdelivr.net/gh/xiongJum/Picture/scr/03.png" style="zoom:50%;" />

<p>2， 查看或者重新设置面板的端口号</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">查找v2-ui的服务进程</span><br>ps -ef | grep v2-ui<br><span class="hljs-meta prompt_"># </span><span class="language-bash">根据PID查找端口号</span><br>netstat -nap | grep [PID]<br></code></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xiongJum/Picture/Scr/03.png"></p>
<h2 id="2-3-通過瀏覽器設置代理"><a href="#2-3-通過瀏覽器設置代理" class="headerlink" title="2.3 通過瀏覽器設置代理"></a>2.3 通過瀏覽器設置代理</h2><p>1, 输入当前服务器IP:端口 和账号密码admin，进入设置面板</p>
<p><img src="https://cdn.jsdelivr.net/gh/xiongJum/Picture/Scr/04.png"></p>
<p>1, 点击账号列表，点击左上角的+号，进入添加账号页面，备注为非填项，其余默认即可，可以按照自己的需求进行修改，本次教程选择的协议为kcp<br>2, kcp消耗流量比较多，但延迟较低，对于延迟较高的IP，选择kcp会一定程度上改善网络环境<br>3, 如果想选择其余协议，可以参考<a target="_blank" rel="noopener" href="https://toutyrater.github.io/advanced/wss_and_web.html">Blog</a><br>4, 若想使用Nginx+w2+TLS进行网络代理，本教程中协议传输配置选择w2，不要选择TLS。TLS在Nginx中配置即可，但客户端中要选择TLS，端口为Nginx中代理的端口，非在本面板中设置的端口</p>
<p><img src="https://cdn.jsdelivr.net/gh/xiongJum/Picture/Scr/05.png"></p>
<p>点击添加-二维码-复制连接，即可获得v2Ray的连接</p>
<h1 id="3-客户端配置"><a href="#3-客户端配置" class="headerlink" title="3. 客户端配置"></a>3. 客户端配置</h1><h2 id="3-1-下载地址"><a href="#3-1-下载地址" class="headerlink" title="3.1 下载地址"></a>3.1 下载地址</h2><p>PC端：<a target="_blank" rel="noopener" href="https://github.com/2dust/v2rayN/releases">windows</a>、<a target="_blank" rel="noopener" href="https://github.com/Cenmrev/V2RayX/releases">MacOS</a><br>移动端：<a target="_blank" rel="noopener" href="https://github.com/2dust/v2rayNG/releases">Android</a></p>
<h2 id="3-2-配置：windows"><a href="#3-2-配置：windows" class="headerlink" title="3.2 配置：windows"></a>3.2 配置：windows</h2><p>1, 下载并解压<a target="_blank" rel="noopener" href="https://github.com/2dust/v2rayN/releases/download/3.19/v2rayN.zip">v2RayN</a>和<a target="_blank" rel="noopener" href="https://github.com/2dust/v2rayN/releases/download/3.19/v2rayN-Core.zip">v2rayN-Core</a><br>2, 点击v2rayN.exe文件，右击右下角的v2rayN的图标选择{从剪贴板导入批量Url}<br>3, 双击右下角的v2ray图标进入显示面板，可以发现有刚刚导入的链接<br>4, 右击右下角的图标选择{Http代理-PAC模式}</p>
<h1 id="4-扩展"><a href="#4-扩展" class="headerlink" title="4. 扩展"></a>4. 扩展</h1><h2 id="4-1-模式说明"><a href="#4-1-模式说明" class="headerlink" title="4.1 模式说明"></a>4.1 模式说明</h2><p>1, 全局是代理所有的网络包括局域网和国内的网络如百度，和国外的网络如Google<br>2, PAC是通过配置文件选择代理部分网络<br>3, v2ray支持GFWfilt地址和本地pac文件同时生效，若GFWList地址中没有代理你需要的网络，你可以在用户PAC设置中手动添加要代理的ip或者域名<br><img src="https://cdn.jsdelivr.net/gh/xiongJum/Picture//Scr/08.png"></p>
<h2 id="4-2-設置PAC代理"><a href="#4-2-設置PAC代理" class="headerlink" title="4.2 設置PAC代理"></a>4.2 設置PAC代理</h2><p>1, pixiv的PAC代理地址</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://www.pixiv.net/">www.pixiv.net</a>,</li>
<li>api.booth.pm,(存疑)</li>
<li>i.pximg.net,</li>
</ul>
<h2 id="4-3-局域网代理配置（如switch配置）"><a href="#4-3-局域网代理配置（如switch配置）" class="headerlink" title="4.3 局域网代理配置（如switch配置）"></a>4.3 局域网代理配置（如switch配置）</h2><p>1, 双击v2ray-参数设置，进入设置页面，点击基础设置查看本地监听端口<br>2, http代理默认即可，你也可以根据自己的选择进行不同的配置<br>3, 本地会开启两个端口号（设置的端口号X和X+1）<br>4, 按下快捷键win+R，在运行输入框中输入cmd<br>5, 在cmd界面输入ipconfig<br>   <img src="https://cdn.jsdelivr.net/gh/xiongJum/Picture//Scr/09.png"></p>
<p>6,在要代理的机器中（如switch）ip设置为上图的ipv4、端口号为设置的端口号+1</p>
<hr>
<h1 id="4-引申文檔"><a href="#4-引申文檔" class="headerlink" title="4. 引申文檔"></a>4. 引申文檔</h1><p><a target="_blank" rel="noopener" href="https://selierlin.github.io/v2ray/">V2Ray 配置指南</a></p>
</div></article></div></main><footer><div class="paginator"><a href="/2020/07/05/code_%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="prev">PREV</a><a href="/2020/06/30/tools_PlantUML/" class="next">NEXT</a></div><div class="copyright"><p>© 2017 - 2023 <a href="https://blog.lain.buzz"></a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/MikeCoder/hexo-theme-gandalfr" target="_blank">hexo-theme-gandalfr</a>.</p></div></footer></div><script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js" crossorigin="anonymous"></script><script src="//cdn.bootcss.com/jquery/3.1.1/jquery.js" crossorigin="anonymous"></script><script>$(document).ready(function() { hljs.configure({useBR: true}); $('pre').each(function(i, block) { hljs.highlightBlock(block); }); });</script></body></html>